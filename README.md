# Fog Network Monitoring & Health Evaluation System

A real-time, intelligent monitoring system for fog and edge computing networks. This project simulates, evaluates, and visualises node health in a multi-tier network infrastructure using adaptive thresholds, anomaly-aware metrics, and Exponential Moving Averages (EMA) for dynamic tracking.

---

## ğŸ“¦ Project Structure

```bash
fog_network_monitoring/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ health_calculator.py       # Node health scoring engine
â”‚   â”œâ”€â”€ node_dispatcher.py         # Dispatcher for node sample generation
â”‚   â””â”€â”€ sample_generators.py       # Tier-specific metric simulation
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ ema_dashboard_dataset.py   # Real-time EMA visualisation dashboard with dataset collection
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ data
â”‚Â Â  â”œâ”€â”€ nafmis_metadata.json
â”‚Â Â  â”œâ”€â”€ node_health_dataset.csv
â”‚Â Â  â”œâ”€â”€ node_health_dataset_summary.json
â”‚   â”œâ”€â”€ node_health_dataset.csv    # Historical samples (generated)
â”‚   â””â”€â”€ node_list.csv              # Metadata for nodes (autogenerated)
â”œâ”€â”€ simulation/
â”‚   â”œâ”€â”€ data_generator.py          # Script to generate offline datasets
â”‚   â””â”€â”€ run_simulation.py          # Launch point for real-time dashboard
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ anomalies.py               # Controlled anomaly injection
â”‚   â””â”€â”€ node_utils.py              # Node list creator and helpers
â”œâ”€â”€ LICENSE
â”œâ”€â”€ main.py
â”œâ”€â”€ README.md
â””â”€â”€ requirements.txt
```

---

## ğŸš€ Key Features

- **Multi-tier Node Simulation**: Supports L1â€“L4 nodes with unique characteristics.
- **Dynamic Metric Generation**: Varies CPU, packet loss rate (PLR), and round-trip time (RTT) over time.
- **Context-Aware Health Calculation**:
  - Weighted scoring (CPU, PLR, RTT)
  - Tier-specific thresholds
  - Anomaly-aware degradation
- **Adaptive EMA Tracking**: Smooth real-time trends with exponential decay (`Î² = 0.3` default).
- **Fault Detection**: Identifies node performance degradation or failure.
- **Live Dashboard**: Interactive Matplotlib plots for health and KPIs over time.

---

## ğŸ“Š Health Scoring Logic

The system uses:

- **Inverted normalisation** (lower is better) for CPU, PLR, and RTT.
- **Tier-based criticality multipliers** and thresholds.
- **Anomaly impact factors** (e.g. `fibre_cut`, `latency_spike`) to adjust health scores.
- **EMA smoothing** for long-term trend tracking and anomaly dampening.

---

## ğŸ§ª How to Run

### 1. ğŸ“¥ Clone the Repository

```bash
git clone https://github.com/imosudi/fog_network_monitoring.git
cd fog_network_monitoring
```

### 2. ğŸ Create and Activate a Virtual Environment

```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. ğŸ“¦ Install Dependencies

```bash
pip install -r requirements.txt
```

### 4. ğŸ§¬ Generate Node Metadata

If `data/node_list.csv` is missing or empty, you can generate it using:

```bash
python -m utils.node_utils
```

Or automatically by running any script â€” fallback logic will regenerate it if missing.

---

## ğŸ“ Run Modes

### âœ… Live EMA Dashboard

```bash
python -m simulation.run_simulation
```

This launches the real-time Matplotlib dashboard for up to 25 nodes. The health scores are computed and visualised per node in subplots.

### ğŸ§® Generate Full Dataset

```bash
python -m simulation.data_generator
```

Creates a historical dataset of node metrics and health scores across multiple time steps (default: 50) and saves:

- `data/node_health_dataset.csv`
- `data/node_health_dataset_summary.json`

---

## ğŸ§  Example Metrics

| Metric        | Description                          |
|---------------|--------------------------------------|
| `cpu`         | CPU utilisation %                    |
| `plr`         | Packet Loss Rate (0â€“1)               |
| `rtt`         | Round Trip Time (ms)                 |
| `anomaly`     | Injected anomaly affecting the node  |
| `health_score`| Calculated health score (0â€“100)      |
| `ema_score`   | EMA-smoothed health score            |
| `status`      | Difference between score and threshold|

---

## âš ï¸ Anomaly Types

| Anomaly            | Health Impact Factor |
|--------------------|----------------------|
| `none`             | 1.0 (no penalty)     |
| `overload`         | 0.2                  |
| `fibre_cut`        | 0.0                  |
| `latency_spike`    | 0.7                  |
| `intermittent_loss`| 0.4                  |
| `routing_loop`     | 0.1                  |
| ...                | ...                  |

---

## ğŸ“ˆ Visualisation Example

Each node shows:
- Blue line: Health Score
- Red dashed: Normalised CPU
- Green dotted: Normalised PLR
- Magenta dot-dash: Normalised RTT

Node titles change based on health status:
- ğŸŸ¢ GOOD
- ğŸŸ¡ FAIR
- ğŸ”´ POOR
- ğŸ”˜ FAULTY (if below threshold)

---

## ğŸ›  Requirements

- Python 3.8+
- `pandas`
- `matplotlib`
- `numpy`

Install with:

```bash
pip install -r requirements.txt
```

---

## ğŸ“Œ Future Extensions

- Web-based dashboard using Flask or FastAPI
- MQTT/REST interface for live data ingestion
- Node clustering and anomaly localisation
- Predictive failure models with ML

---

## ğŸ“œ License

MIT License Â© 2025 [Mosudi Isiaka](https://github.com/imosudi)

---

## ğŸ™‹ğŸ½â€â™‚ï¸ Author

**Mosudi Isiaka**  
M.Eng. Communications Engineering | LPIC-1 | Network Systems & AI Enthusiast  
ğŸ”— [LinkedIn](https://www.linkedin.com/in/isiaka-mosudi-9367a21b/)
