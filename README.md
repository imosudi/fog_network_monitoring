# Fog Network Monitoring & Health Evaluation System

A real-time, intelligent monitoring system for fog and edge computing networks. This project simulates, evaluates, and visualises node health in a multi-tier network infrastructure using adaptive thresholds, anomaly-aware metrics, and Exponential Moving Averages (EMA) for dynamic tracking.

---

## 📦 Project Structure

```bash
fog_network_monitoring/
├── core/
│   ├── health_calculator.py       # Node health scoring engine
│   ├── node_dispatcher.py         # Dispatcher for node sample generation
│   └── sample_generators.py       # Tier-specific metric simulation
├── dashboard/
│   ├── ema_dashboard_dataset.py   # Real-time EMA visualisation dashboard with dataset collection
│   └── __init__.py
├── data
│   ├── nafmis_metadata.json
│   ├── node_health_dataset.csv
│   ├── node_health_dataset_summary.json
│   ├── node_health_dataset.csv    # Historical samples (generated)
│   └── node_list.csv              # Metadata for nodes (autogenerated)
├── simulation/
│   ├── data_generator.py          # Script to generate offline datasets
│   └── run_simulation.py          # Launch point for real-time dashboard
├── utils/
│   ├── anomalies.py               # Controlled anomaly injection
│   └── node_utils.py              # Node list creator and helpers
├── LICENSE
├── main.py
├── README.md
└── requirements.txt
```

---

## 🚀 Key Features

- **Multi-tier Node Simulation**: Supports L1–L4 nodes with unique characteristics.
- **Dynamic Metric Generation**: Varies CPU, packet loss rate (PLR), and round-trip time (RTT) over time.
- **Context-Aware Health Calculation**:
  - Weighted scoring (CPU, PLR, RTT)
  - Tier-specific thresholds
  - Anomaly-aware degradation
- **Adaptive EMA Tracking**: Smooth real-time trends with exponential decay (`β = 0.3` default).
- **Fault Detection**: Identifies node performance degradation or failure.
- **Live Dashboard**: Interactive Matplotlib plots for health and KPIs over time.

---

## 📊 Health Scoring Logic

The system uses:

- **Inverted normalisation** (lower is better) for CPU, PLR, and RTT.
- **Tier-based criticality multipliers** and thresholds.
- **Anomaly impact factors** (e.g. `fibre_cut`, `latency_spike`) to adjust health scores.
- **EMA smoothing** for long-term trend tracking and anomaly dampening.

---

## 🧪 How to Run

### 1. 📥 Clone the Repository

```bash
git clone https://github.com/imosudi/fog_network_monitoring.git
cd fog_network_monitoring
```

### 2. 🐍 Create and Activate a Virtual Environment

```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. 📦 Install Dependencies

```bash
pip install -r requirements.txt
```

### 4. 🧬 Generate Node Metadata

If `data/node_list.csv` is missing or empty, you can generate it using:

```bash
python -m utils.node_utils
```

Or automatically by running any script — fallback logic will regenerate it if missing.

---

## 📁 Run Modes

### ✅ Live EMA Dashboard

```bash
python -m simulation.run_simulation
```

This launches the real-time Matplotlib dashboard for up to 25 nodes. The health scores are computed and visualised per node in subplots.

### 🧮 Generate Full Dataset

```bash
python -m simulation.data_generator
```

Creates a historical dataset of node metrics and health scores across multiple time steps (default: 50) and saves:

- `data/node_health_dataset.csv`
- `data/node_health_dataset_summary.json`

---

## 🧠 Example Metrics

| Metric        | Description                          |
|---------------|--------------------------------------|
| `cpu`         | CPU utilisation %                    |
| `plr`         | Packet Loss Rate (0–1)               |
| `rtt`         | Round Trip Time (ms)                 |
| `anomaly`     | Injected anomaly affecting the node  |
| `health_score`| Calculated health score (0–100)      |
| `ema_score`   | EMA-smoothed health score            |
| `status`      | Difference between score and threshold|

---

## ⚠️ Anomaly Types

| Anomaly            | Health Impact Factor |
|--------------------|----------------------|
| `none`             | 1.0 (no penalty)     |
| `overload`         | 0.2                  |
| `fibre_cut`        | 0.0                  |
| `latency_spike`    | 0.7                  |
| `intermittent_loss`| 0.4                  |
| `routing_loop`     | 0.1                  |
| ...                | ...                  |

---

## 📈 Visualisation Example

Each node shows:
- Blue line: Health Score
- Red dashed: Normalised CPU
- Green dotted: Normalised PLR
- Magenta dot-dash: Normalised RTT

Node titles change based on health status:
- 🟢 GOOD
- 🟡 FAIR
- 🔴 POOR
- 🔘 FAULTY (if below threshold)

---

## 🛠 Requirements

- Python 3.8+
- `pandas`
- `matplotlib`
- `numpy`

Install with:

```bash
pip install -r requirements.txt
```

---

## 📌 Future Extensions

- Web-based dashboard using Flask or FastAPI
- MQTT/REST interface for live data ingestion
- Node clustering and anomaly localisation
- Predictive failure models with ML

---

## 📜 License

MIT License © 2025 [Mosudi Isiaka](https://github.com/imosudi)

---

## 🙋🏽‍♂️ Author

**Mosudi Isiaka**  
M.Eng. Communications Engineering | LPIC-1 | Network Systems & AI Enthusiast  
🔗 [LinkedIn](https://www.linkedin.com/in/isiaka-mosudi-9367a21b/)
